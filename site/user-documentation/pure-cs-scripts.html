<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Jun 5, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130605" />
    <meta http-equiv="Content-Language" content="en" />
    <title>GrinderScript.Net - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/ebjornset/GrinderScript.Net.git">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>GrinderScript.Net</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-06-05</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.1</li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">User documentation</li>
                                
      <li>
    
                          <a href="../index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="../user-documentation/installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../user-documentation/loadtests.html" title="Writing load tests">
          <i class="none"></i>
        Writing load tests</a>
            </li>
                  
      <li>
    
                          <a href="../user-documentation/datapools.html" title="Using data pools">
          <i class="none"></i>
        Using data pools</a>
            </li>
                  
      <li>
    
                          <a href="../user-documentation/scenarios.html" title="Composing test scenarios">
          <i class="none"></i>
        Composing test scenarios</a>
            </li>
                  
      <li class="active">
    
            <a href="#"><i class="none"></i>Using pure .cs scripts</a>
          </li>
                  
      <li>
    
                          <a href="../user-documentation/properties.html" title="grinder.properties">
          <i class="none"></i>
        grinder.properties</a>
            </li>
                              <li class="nav-header">Developer documentation</li>
                                
      <li>
    
                          <a href="../developer-documentation/development-environment.html" title="Environment">
          <i class="none"></i>
        Environment</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                      
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                    
      <li>
    
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://GrinderScript.Net/" data-size="tall" ></div>

                   <div class="clear"></div>
                   
        
        
        
    <iframe src="http://www.facebook.com/plugins/like.php?href=http://GrinderScript.Net/&send=false&layout=box_count&show-faces=false&action=like&colorscheme=light"
        scrolling="no" frameborder="0"
        style="border:none; width:48px; height:63px; margin-top: 10px;" ></iframe>
               <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/GrinderScriptDN" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="false" data-lang="en">Follow GrinderScriptDN</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Using pure .cs files as load test scripts in GrinderScript.Net</h1><p>If you feel that creating and compiling a C# load test project is to much overhead, you can now also run a pure .cs file directly as a load test script. </p><p>If you're not comfortable with how to write a load test with GrinderScript.Net, we recommend that you (re)visit the description of <a href="./loadtests.html" title="Writing load tests with GrinderScript.Net page">how to write load test</a> before you continue.</p><p>You need the GrinderScript.Net.CsScript NuGet package installed to use this feature. If you've already installed the GrinderScript.Net.Samples package, you also have GrinderScript.Net.CsScript installed, otherwise you install it from the Visual Studio <i>Package Manager Console</i> with the command</p><p><tt>install-package GrinderScript.Net.CsScript</tt></p><p>or by running NuGet.exe from the command line, e.g.:</p><p><tt>C:\Util\NuGet.exe install GrinderScript.Net.CsScript -OutputDirectory C:\MySolution\ExternalLibs</tt></p><p>Internally GrinderScript.Net use the excellent C# script engine <a class="externalLink" href="http://www.csscript.net/" title="Cs-Script home page">Cs-Script</a>'s hosting functionality to do all the hard work of dynamically loading and compiling your .cs file into code in the CLR. We uses the new <a class="externalLink" href="http://www.csscript.net/help/evaluator.html" title="CS-Script Evaluator - Compiler As Service help page">CS-Script Evaluator</a>, that is based on <a class="externalLink" href="http://www.mono-project.com/CSharp_Compiler" title="Mono CSharp Compiler home page">Mono's compiler as service</a>. You can use all the CS-Script features that are supported in hosted evaluator mode, with one limitation: Your .cs script file <b>must</b> contain a class that implements the <tt>GrinderScript.Net.Core.IGrinderWorker</tt> interface. Duck typing or scripts containing only a method definition is currently not supported. Please consult the <a class="externalLink" href="http://www.csscript.net/Documentation.html" title="CS-Script Documentation page">CS-Script Documentation</a> if you want to learn more about CS-Script's features. The good news is that you can implement your worker using any of the strategies described in the <a href="./loadtests.html" title="Writing load tests with GrinderScript.Net page">Writing load tests page</a>.</p><p>Beside writing your worker in the .cs script file, all you need to configure your <tt>grinder.properties</tt> following these three steps:</p>
<ol style="list-style-type: decimal">
  <li>Use <i>GrinderScript.Net.CsScript.dll</i> as the <i>grinder.script</i> property. The location is relative to the location of your grinder.properties.</li>
  <li>Use the ready made <i>CsScriptWorker</i> as the <i>grinderscript-dotnet.workerType</i> property.</li>
  <li>Configure the actual .cs script file with the <i>grinderscript-dotnet.csScriptWorker.script</i> property. The location is relative to the location of the assembly specified in the <i>grinder.script</i> property.</li>
</ol><p>Here is the interesting parts taken from the <tt>grinder.properties</tt> in the <i>GrinderScript.Net.Samples</i> CsScript example:</p>
<div class="source"><pre class="prettyprint">grinder.script=..\\..\\..\\GrinderScript.Net.CsScript.dll

grinderscript-dotnet.workerType=GrinderScript.Net.CsScript.CsScriptWorker, GrinderScript.Net.CsScript

grinderscript-dotnet.csScriptWorker.script=.\\Samples\\GrinderScript.Net\\Core\\WorkerThatLogs.cs
</pre></div><p>With this in place you can use a workflow where you write some load test script in a .cs file, save the file and then run it directly from the Grinder Console, in an iterative process. The Grinder Console will automatically distribute the changed script file to all your Grinder Agents.</p><div class="section"><h2>What's next<a name="Whats_next"></a></h2><p>If youve followed the user documentation for GrinderScript.Net sequentially, your last piece of information is <a href="./properties.html" title="Complete list of properties used by GrinderScript.Net page">the complete list of properties</a> used by GrinderScript.Net. Otherwise you should check out <a href="./loadtests.html" title="Writing load tests with GrinderScript.Net page">how to write load tests</a> with GrinderScript.Net.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
                    
      </div>

        
        
          
    
    
                
    <div id="ohloh" class="pull-right">
      <script type="text/javascript" src="http://www.ohloh.net/p/641494/widgets/project_users.js"></script>
    </div>
        </div>
    </footer>
  </body>
</html>
